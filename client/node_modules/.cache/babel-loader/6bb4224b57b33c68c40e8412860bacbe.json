{"ast":null,"code":"var _jsxFileName = \"/Users/dmitry/Desktop/JavaScript/express-chat/client/src/pages/ChatroomsPage.js\";\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport { useHttp } from '../hooks/http.hook';\nimport { AuthContext } from '../context/AuthContext';\nimport { Loader } from '../components/LoaderComp';\nexport const ChatroomsPage = () => {\n  const {\n    token\n  } = useContext(AuthContext);\n  const {\n    request,\n    loading\n  } = useHttp();\n  const [chatrooms, setChatrooms] = useState(null);\n  const getChatrooms = useCallback(async () => {\n    try {\n      const fetched = await request(`/api/chat/chatrooms`, 'GET', null, {\n        Authorization: `Bearer ${token}`\n      });\n      setChatrooms(fetched.reverse());\n    } catch (e) {}\n  }, [token, request]);\n  useEffect(() => {\n    getChatrooms();\n  }); // If still loading data from backend\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(Loader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 14\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"blue-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }, \"All Chatrooms\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }, !loading && chatrooms && chatrooms.map((chat, index) => {\n    if (!chat.private) {\n      const url = \"/chatrooms/\" + chat._id;\n      return /*#__PURE__*/React.createElement(\"a\", {\n        href: url,\n        key: index,\n        className: \"collection-item\",\n        id: \"chat-public\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 15\n        }\n      }, chat.chatname, \" (online: \", chat.onlineUsers.length, \")\");\n    } else {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        href: \"#\",\n        key: index,\n        className: \"collection-item\",\n        id: \"chat-private\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 15\n        }\n      }, chat.chatname, \" (private)\");\n    }\n  })));\n};","map":{"version":3,"sources":["/Users/dmitry/Desktop/JavaScript/express-chat/client/src/pages/ChatroomsPage.js"],"names":["React","useCallback","useContext","useEffect","useState","useHttp","AuthContext","Loader","ChatroomsPage","token","request","loading","chatrooms","setChatrooms","getChatrooms","fetched","Authorization","reverse","e","map","chat","index","private","url","_id","chatname","onlineUsers","length"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,WAAf,EAA4BC,UAA5B,EAAwCC,SAAxC,EAAmDC,QAAnD,QAAkE,OAAlE;AACA,SAAQC,OAAR,QAAsB,oBAAtB;AACA,SAAQC,WAAR,QAA0B,wBAA1B;AACA,SAAQC,MAAR,QAAqB,0BAArB;AAGA,OAAO,MAAMC,aAAa,GAAG,MAAM;AAGjC,QAAM;AAACC,IAAAA;AAAD,MAAUP,UAAU,CAACI,WAAD,CAA1B;AACA,QAAM;AAACI,IAAAA,OAAD;AAAUC,IAAAA;AAAV,MAAqBN,OAAO,EAAlC;AACA,QAAM,CAACO,SAAD,EAAYC,YAAZ,IAA4BT,QAAQ,CAAC,IAAD,CAA1C;AAGA,QAAMU,YAAY,GAAGb,WAAW,CAAC,YAAY;AAC3C,QAAI;AACF,YAAMc,OAAO,GAAG,MAAML,OAAO,CAC1B,qBAD0B,EAE3B,KAF2B,EAG3B,IAH2B,EAI3B;AAACM,QAAAA,aAAa,EAAG,UAASP,KAAM;AAAhC,OAJ2B,CAA7B;AAMAI,MAAAA,YAAY,CAACE,OAAO,CAACE,OAAR,EAAD,CAAZ;AACD,KARD,CAQE,OAAOC,CAAP,EAAU,CAAE;AACf,GAV+B,EAU7B,CAACT,KAAD,EAAQC,OAAR,CAV6B,CAAhC;AAYAP,EAAAA,SAAS,CAAC,MAAM;AACdW,IAAAA,YAAY;AACb,GAFQ,CAAT,CApBiC,CAwB/B;;AACA,MAAIH,OAAJ,EAAa;AACX,wBAAO,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAGH,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,CAACA,OAAD,IAAYC,SAAZ,IAAyBA,SAAS,CAACO,GAAV,CAAe,CAACC,IAAD,EAAOC,KAAP,KAAiB;AACzD,QAAI,CAACD,IAAI,CAACE,OAAV,EAAmB;AACjB,YAAMC,GAAG,GAAG,gBAAgBH,IAAI,CAACI,GAAjC;AACA,0BACE;AAAG,QAAA,IAAI,EAAED,GAAT;AAAc,QAAA,GAAG,EAAEF,KAAnB;AAA0B,QAAA,SAAS,EAAC,iBAApC;AAAsD,QAAA,EAAE,EAAC,aAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACID,IAAI,CAACK,QADT,gBAC8BL,IAAI,CAACM,WAAL,CAAiBC,MAD/C,MADF;AAGG,KALL,MAKW;AACT,0BACE;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,GAAG,EAAEN,KAAjB;AAAwB,QAAA,SAAS,EAAC,iBAAlC;AAAoD,QAAA,EAAE,EAAC,cAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAwED,IAAI,CAACK,QAA7E,eADF;AAGC;AACJ,GAX0B,CAD7B,CAFF,CADF;AAmBD,CAjDM","sourcesContent":["import React, {useCallback, useContext, useEffect, useState} from 'react'\nimport {useHttp} from '../hooks/http.hook'\nimport {AuthContext} from '../context/AuthContext'\nimport {Loader} from '../components/LoaderComp'\n\n\nexport const ChatroomsPage = () => {\n\n\n  const {token} = useContext(AuthContext)\n  const {request, loading} = useHttp()\n  const [chatrooms, setChatrooms] = useState(null)\n\n\n  const getChatrooms = useCallback(async () => {\n    try {\n      const fetched = await request (\n        `/api/chat/chatrooms`,\n        'GET',\n        null,\n        {Authorization: `Bearer ${token}`}\n      )\n      setChatrooms(fetched.reverse()) \n    } catch (e) {}\n  }, [token, request])\n\n  useEffect(() => {\n    getChatrooms()\n  })\n\n    // If still loading data from backend\n    if (loading) {\n      return <Loader />\n    }\n\n\n  return (\n    <div>\n      <h1 className=\"blue-text\">All Chatrooms</h1>\n      <div className=\"collection\">\n        { !loading && chatrooms && chatrooms.map( (chat, index) => {\n          if (!chat.private) {\n            const url = \"/chatrooms/\" + chat._id\n            return (\n              <a href={url} key={index} className=\"collection-item\" id=\"chat-public\">\n                { chat.chatname } (online: {chat.onlineUsers.length})</a>\n            ) } else {\n            return (\n              <a href=\"#\" key={index} className=\"collection-item\" id=\"chat-private\">{ chat.chatname } (private)</a>\n            )\n            }\n        } ) }\n      </div>\n    </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}